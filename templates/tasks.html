{% extends "base.html" %}

{% block content %}
<h1 class="module-title">–ó–∞–¥–∞—á–∏</h1>

<!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
<form class="add-form" method="POST" action="{{ url_for('task_manager') }}">
    <div class="form-group">
        <label>–ó–∞–¥–∞—á–∞:</label>
        <input type="text" name="task" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏" required>
    </div>
    
    <div class="form-group">
        <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
        <textarea name="description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏..." rows="3"></textarea>
    </div>
    
    <div class="form-group">
        <label>–¢–∏–ø:</label>
        <select name="type">
            {% for type in list_type_task %}
                <option value="{{ type }}">{{ type }}</option>
            {% endfor %}
        </select>
    </div>

    <button type="submit">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</button>
</form>

<!-- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á -->
<div class="tasks-list">
    {% if tasks %}
        {% for task in tasks %}
            <div class="task-item">
                <div class="task-info">
                    <div class="task-header">
                        <span class="task-title">{{ task.task }}</span>
                        <span class="task-type">{{ task.type }}</span>
                        <span class="task-status">{{ task.status }}</span>
                    </div>
                    
                    {% if task.description %}
                        <div class="task-description">{{ task.description }}</div>
                    {% endif %}
                    
                    <div class="task-dates">
                        {% if task.start_date %}
                            <span>–ù–∞—á–∞–ª–æ: {{ task.start_date }}</span>
                        {% endif %}
                        {% if task.end_date %}
                            <span>–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ: {{ task.end_date }}</span>
                        {% endif %}
                    </div>
                </div>
                
                <div class="task-actions">
                    <a href="{{ url_for('edit_task', task_id=task.id) }}">
                        <button class="btn-edit">‚úèÔ∏è</button>
                    </a>
                    <a href="{{ url_for('delete_task', task_id=task.id) }}" 
                       onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É?')">
                        <button class="btn-delete">üóëÔ∏è</button>
                    </a>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <div class="empty-state">–ù–µ—Ç –∑–∞–¥–∞—á</div>
    {% endif %}
</div>

<style>
.tasks-list {
    max-width: 800px;
}

.task-item {
    padding: 15px 0;
    border-bottom: 1px solid #eee;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
}

.task-item:last-child {
    border-bottom: none;
}

.task-info {
    flex: 1;
}

.task-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 8px;
    flex-wrap: wrap;
}

.task-title {
    font-weight: 500;
    font-size: 16px;
}

.task-type {
    background: #e9ecef;
    padding: 2px 8px;
    border-radius: 3px;
    font-size: 12px;
}

.task-status {
    background: #f8f9fa;
    padding: 2px 8px;
    border-radius: 3px;
    font-size: 12px;
    border: 1px solid #dee2e6;
}

.task-description {
    color: #666;
    margin-bottom: 8px;
    font-size: 14px;
}

.task-dates {
    font-size: 12px;
    color: #999;
    display: flex;
    gap: 15px;
}

.task-actions {
    display: flex;
    gap: 5px;
}

.btn-edit, .btn-delete {
    padding: 6px 10px;
    font-size: 14px;
}

select {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 3px;
    font-size: 14px;
    background: white;
}
</style>
{% endblock %}